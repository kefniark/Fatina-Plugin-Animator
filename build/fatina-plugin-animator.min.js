!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("FatinaPluginAnimator",[],e):"object"==typeof exports?exports.FatinaPluginAnimator=e():t.FatinaPluginAnimator=e()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){"use strict";function i(){return new a}Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=n(3);e.Get=i;var a=function(){function t(){this.name="fatina-plugin-animator",this.init=!1}return Object.defineProperty(t.prototype,"TickerManager",{get:function(){return this.fatina.plugin.TickerManager},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"AnimatorManager",{get:function(){return this.fatina.plugin.AnimatorManager},enumerable:!0,configurable:!0}),t.prototype.Init=function(t){if(this.init)throw new Error("Try to init the plugin twice : "+name);if(void 0===t||null===t||null===t.plugin)throw new Error("Try to init the plugin without fatina : "+name);this.fatina=t,this.init=!0,t.plugin.AnimatorManager=new r.AnimatorManager(this),t.plugin.TickerManager=new o.TickerManager(this)},t}();e.FatinaPluginAnimator=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),r=function(){function t(t){this.animations={},this.tickerMap={},this.plugin=t}return Object.defineProperty(t.prototype,"Animations",{get:function(){return Object.keys(this.animations)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Labels",{get:function(){var t=this;return Object.keys(this.tickerMap).map(function(e){return t.tickerMap[e]}).filter(function(t,e,n){return n.indexOf(t)===e})},enumerable:!0,configurable:!0}),t.prototype.Register=function(t,e,n){return this.animations[t]&&this.tickerMap[t]&&delete this.tickerMap[t],this.animations[t]=e,n&&(this.tickerMap[t]=n),this},t.prototype.Instantiate=function(t,e,n){if(!(t in this.animations))throw new Error("this animation doesnt exist "+t);var i=this.animations[t](e,n);return this.tickerMap[t]&&i.SetParent(this.plugin.TickerManager.Get(this.tickerMap[t])),i},t.prototype.AddAnimatorTo=function(t){return t.Animator||(t.Animator=new i.Animator(t,this)),t.Animator},t}();e.AnimatorManager=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){this.animations={},this.current={},this.groups=["default"],this.currentAnimName={},this.animGroupMap={},this.animTransitionMap={},this.animFinalValueMap={},this.animUnstoppableMap={},this.eventStart={},this.eventOnceStart={},this.eventComplete={},this.eventOnceComplete={},this.object=t,this.animatorManager=e}return t.prototype.AddAnimation=function(t,e,n,i){var r=this.animatorManager.Instantiate(e,this.object,i);return this.AddCustomAnimation(t,n||{},r)},t.prototype.AddCustomAnimation=function(t,e,n){var i=this,r=n;return r.OnStart(function(){i.EmitEvent(i.eventStart[t]),t in i.eventOnceStart&&(i.EmitEvent(i.eventOnceStart[t]),i.eventOnceStart[t]=[])}),r.OnKilled(function(){r.Recycle(),i.EmitEvent(i.eventComplete[t]),t in i.eventOnceComplete&&(i.EmitEvent(i.eventOnceComplete[t]),i.eventOnceComplete[t]=[])}),r.OnComplete(function(){r.Recycle(),i.EmitEvent(i.eventComplete[t]),t in i.eventOnceComplete&&(i.EmitEvent(i.eventOnceComplete[t]),i.eventOnceComplete[t]=[]),t in i.animTransitionMap&&i.Play(i.animTransitionMap[t])}),this.animations[t]=r,this.animFinalValueMap[t]=!!e&&!!e.finalValue,this.animUnstoppableMap[t]=!!e&&!!e.unstoppable,this.animGroupMap[t]=e&&e.group?e.group:"default",e&&e.next&&(this.animTransitionMap[t]=e.next),-1===this.groups.indexOf(this.animGroupMap[t])&&this.groups.push(this.animGroupMap[t]),this},t.prototype.Emit=function(t,e){try{t.apply(this,e)}catch(t){console.warn(t)}},t.prototype.EmitEvent=function(t,e){if(t)for(var n=0;n<t.length;n++)this.Emit(t[n],e)},t.prototype.OnStartAll=function(t,e){return t in this.eventStart?this.eventStart[t].push(e):this.eventStart[t]=[e],this},t.prototype.OnStart=function(t,e){return t in this.eventOnceStart?this.eventOnceStart[t].push(e):this.eventOnceStart[t]=[e],this},t.prototype.OnCompleteAll=function(t,e){return t in this.eventComplete?this.eventComplete[t].push(e):this.eventComplete[t]=[e],this},t.prototype.OnComplete=function(t,e){return t in this.eventOnceComplete?this.eventOnceComplete[t].push(e):this.eventOnceComplete[t]=[e],this},t.prototype.Play=function(t,e){if(!(t in this.animations))throw new Error("this animation doesnt exist "+t);var n=this.animGroupMap[t],i=this.current[n];if(i&&i.IsRunning()&&this.animUnstoppableMap[this.currentAnimName[n]])return void console.log("This animation already run and is unstoppable",this.currentAnimName[n],"->",t);if(i&&(i.IsRunning()||i.IsPaused())){var r=this.currentAnimName[n];i.Skip(this.animFinalValueMap[r]),this.current[n]=void 0}i=this.animations[t],this.current[n]=i,this.currentAnimName[n]=t,e&&this.OnComplete(t,e),i.Start()},t.prototype.Pause=function(t){var e=t||"default",n=this.current[e];n&&n.IsRunning()&&n.Pause()},t.prototype.PauseAll=function(){for(var t=0,e=this.groups;t<e.length;t++){var n=e[t];this.Pause(n)}},t.prototype.Resume=function(t){var e=t||"default",n=this.current[e];n&&n.IsPaused()&&n.Resume()},t.prototype.ResumeAll=function(){for(var t=0,e=this.groups;t<e.length;t++){var n=e[t];this.Resume(n)}},t.prototype.Stop=function(t){var e=t||"default",n=this.current[e];if(n&&!n.IsFinished()){var i=this.currentAnimName[e];n.Skip(this.animFinalValueMap[i]),this.current[e]=void 0}},t.prototype.StopAll=function(){for(var t=0,e=this.groups;t<e.length;t++){var n=e[t];this.Stop(n)}},t.prototype.Destroy=function(){for(var t=0,e=this.groups;t<e.length;t++){var n=e[t],i=this.current[n];i&&!i.IsFinished()&&i.Kill()}this.animations={},this.animGroupMap={},this.animFinalValueMap={},this.animUnstoppableMap={},this.current={},this.currentAnimName={},delete this.object.Animator},t}();e.Animator=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.tickers={},this.plugin=t}return t.prototype.Get=function(t){return this.tickers[t]?this.tickers[t]:(this.tickers[t]=this.plugin.fatina.Ticker(),this.tickers[t])},t.prototype.PauseAll=function(t){this.tickers[t]&&this.tickers[t].Pause()},t.prototype.ResumeAll=function(t){this.tickers[t]&&this.tickers[t].Resume()},t.prototype.KillAll=function(t){this.tickers[t]&&(this.tickers[t].Kill(),delete this.tickers[t])},t}();e.TickerManager=i}])});
//# sourceMappingURL=fatina-plugin-animator.min.js.map