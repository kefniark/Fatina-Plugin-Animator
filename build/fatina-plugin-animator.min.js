!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define("FatinaPluginAnimator",[],i):"object"==typeof exports?exports.FatinaPluginAnimator=i():t.FatinaPluginAnimator=i()}(this,function(){return function(t){function i(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}var n={};return i.m=t,i.c=n,i.d=function(t,n,e){i.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:e})},i.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(n,"a",n),n},i.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},i.p="",i(i.s=0)}([function(t,i,n){"use strict";function e(){return new o}Object.defineProperty(i,"__esModule",{value:!0});var r=n(1),a=n(3);i.Get=e;var o=function(){function t(){this.name="fatina-plugin-animator",this.init=!1}return Object.defineProperty(t.prototype,"TickerManager",{get:function(){return this.fatina.plugin.TickerManager},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"AnimatorManager",{get:function(){return this.fatina.plugin.AnimatorManager},enumerable:!0,configurable:!0}),t.prototype.Init=function(t){if(this.init)throw new Error("Try to init the plugin twice : "+name);if(void 0===t||null===t||null===t.plugin)throw new Error("Try to init the plugin without fatina : "+name);this.fatina=t,this.init=!0,t.plugin.AnimatorManager=new r.AnimatorManager(this),t.plugin.TickerManager=new a.TickerManager(this)},t}();i.FatinaPluginAnimator=o},function(t,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=n(2),r=function(){function t(t){this.animations={},this.tickerMap={},this.plugin=t}return Object.defineProperty(t.prototype,"Animations",{get:function(){return Object.keys(this.animations)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Labels",{get:function(){var t=this;return Object.keys(this.tickerMap).map(function(i){return t.tickerMap[i]}).filter(function(t,i,n){return n.indexOf(t)===i})},enumerable:!0,configurable:!0}),t.prototype.Register=function(t,i,n){return this.animations[t]&&this.tickerMap[t]&&delete this.tickerMap[t],this.animations[t]=i,n&&(this.tickerMap[t]=n),this},t.prototype.Instantiate=function(t,i,n){if(!(t in this.animations))throw new Error("this animation doesnt exist "+t);var e=this.animations[t](i,n);return this.tickerMap[t]&&e.SetParent(this.plugin.TickerManager.Get(this.tickerMap[t])),e},t.prototype.AddAnimatorTo=function(t){return t.Animator||(t.Animator=new e.Animator(t,this)),t.Animator},t}();i.AnimatorManager=r},function(t,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=function(){function t(t,i){this.animations={},this.current={},this.layers=["default"],this.animGroupMap={},this.animTransitionMap={},this.animFinalValueMap={},this.animUnstoppableMap={},this.currentAnimName={},this.object=t,this.animatorManager=i}return t.prototype.AddAnimation=function(t,i,n,e){var r=this.animatorManager.Instantiate(i,this.object,e);return this.AddCustomAnimation(t,n||{},r)},t.prototype.AddTransition=function(t,i){if(!(t in this.animations))throw new Error("this animation doesnt exist "+t);if(!(i in this.animations))throw new Error("this animation doesnt exist "+i);return this.animTransitionMap[t]=i,this},t.prototype.AddCustomAnimation=function(t,i,n){var e=this,r=n;return r.OnKilled(function(){return r.Recycle()}),r.OnComplete(function(){r.Recycle(),t in e.animTransitionMap&&e.Play(e.animTransitionMap[t])}),this.animations[t]=r,this.animFinalValueMap[t]=!!i&&!!i.finalValue,this.animUnstoppableMap[t]=!!i&&!!i.unstoppable,this.animGroupMap[t]=i&&i.group?i.group:"default",-1===this.layers.indexOf(this.animGroupMap[t])&&this.layers.push(this.animGroupMap[t]),this},t.prototype.Play=function(t){if(!(t in this.animations))throw new Error("this animation doesnt exist "+t);var i=this.animGroupMap[t],n=this.current[i];if(n&&n.IsRunning()&&this.animUnstoppableMap[this.currentAnimName[i]])return console.log("This animation already run and is unstoppable",this.currentAnimName[i],"->",t),n;if(n&&(n.IsRunning()||n.IsPaused())){var e=this.currentAnimName[i];n.Skip(this.animFinalValueMap[e]),this.current[i]=void 0}return n=this.animations[t],this.current[i]=n,this.currentAnimName[i]=t,n.Start(),n},t.prototype.Pause=function(t){var i=t||"default",n=this.current[i];n&&n.IsRunning()&&n.Pause()},t.prototype.PauseAll=function(){for(var t=0,i=this.layers;t<i.length;t++){var n=i[t];this.Pause(n)}},t.prototype.Resume=function(t){var i=t||"default",n=this.current[i];n&&n.IsPaused()&&n.Resume()},t.prototype.ResumeAll=function(){for(var t=0,i=this.layers;t<i.length;t++){var n=i[t];this.Resume(n)}},t.prototype.Stop=function(t){var i=t||"default",n=this.current[i];if(n&&!n.IsFinished()){var e=this.currentAnimName[i];n.Skip(this.animFinalValueMap[e]),this.current[i]=void 0}},t.prototype.StopAll=function(){for(var t=0,i=this.layers;t<i.length;t++){var n=i[t];this.Stop(n)}},t.prototype.Destroy=function(){for(var t=0,i=this.layers;t<i.length;t++){var n=i[t],e=this.current[n];e&&!e.IsFinished()&&e.Kill()}this.animations={},this.animGroupMap={},this.animFinalValueMap={},this.animUnstoppableMap={},this.current={},this.currentAnimName={},delete this.object.Animator},t}();i.Animator=e},function(t,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=function(){function t(t){this.tickers={},this.plugin=t}return t.prototype.Get=function(t){return this.tickers[t]?this.tickers[t]:(this.tickers[t]=this.plugin.fatina.Ticker(),this.tickers[t])},t.prototype.PauseAll=function(t){this.tickers[t]&&this.tickers[t].Pause()},t.prototype.ResumeAll=function(t){this.tickers[t]&&this.tickers[t].Resume()},t.prototype.KillAll=function(t){this.tickers[t]&&(this.tickers[t].Kill(),delete this.tickers[t])},t}();i.TickerManager=e}])});
//# sourceMappingURL=fatina-plugin-animator.min.js.map