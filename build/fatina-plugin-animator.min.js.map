{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6","webpack:///fatina-plugin-animator.min.js","webpack:///webpack/bootstrap 65cc6e4cfb11aecd9aaa?ff89","webpack:///./src/index.ts?eac3","webpack:///./src/manager/animatorManager.ts?fc6e","webpack:///./src/animator/animator.ts?3fe3","webpack:///./src/manager/tickerManager.ts?a6d7","webpack:///./node_modules/stats.js/build/stats.min.js?a1dd"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","Get","FatinaPluginAnimator","value","animatorManager_1","tickerManager_1","stats","init","counter","running","fatina","plugin","TickerManager","AnimatorManager","Init","_this","Error","undefined","StatPanel","Panel","AddListenerCreated","tween","OnStart","OnComplete","OnKilled","SetInterval","update","animator_1","animations","tickerMap","keys","map","x","filter","piece","index","self","indexOf","Register","onCreate","tickerName","Instantiate","params","SetParent","AddAnimatorTo","obj","Animator","animatorManager","current","groups","currentAnimName","animGroupMap","animTransitionMap","animFinalValueMap","animUnstoppableMap","eventStart","eventOnceStart","eventComplete","eventOnceComplete","AddAnimation","animationName","options","anim","AddCustomAnimation","EmitEvent","Recycle","Play","finalValue","unstoppable","group","next","push","Emit","func","args","apply","e","console","warn","listeners","length","OnStartAll","cb","OnCompleteAll","onComplete","layerName","IsRunning","log","IsPaused","Skip","Start","Pause","PauseAll","_i","_a","layerId","Resume","ResumeAll","Stop","IsFinished","StopAll","Destroy","Kill","tickers","Ticker","KillAll","f","a","appendChild","dom","u","children","style","display","document","createElement","cssText","addEventListener","preventDefault","k","performance","Date","now","g","r","h","memory","t","REVISION","addPanel","showPanel","begin","end","usedJSHeapSize","jsHeapSizeLimit","domElement","setMode","Infinity","Math","round","window","devicePixelRatio","v","q","width","height","b","getContext","font","textBaseline","fillStyle","fillRect","fillText","globalAlpha","w","min","max","drawImage"],"mappings":"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","file":"fatina-plugin-animator.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"FatinaPluginAnimator\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"FatinaPluginAnimator\"] = factory();\n\telse\n\t\troot[\"FatinaPluginAnimator\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"FatinaPluginAnimator\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"FatinaPluginAnimator\"] = factory();\n\telse\n\t\troot[\"FatinaPluginAnimator\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar animatorManager_1 = __webpack_require__(1);\r\nvar tickerManager_1 = __webpack_require__(3);\r\nvar stats = __webpack_require__(4);\r\nfunction Get() {\r\n    return new FatinaPluginAnimator();\r\n}\r\nexports.Get = Get;\r\nvar FatinaPluginAnimator = (function () {\r\n    function FatinaPluginAnimator() {\r\n        this.name = 'fatina-plugin-animator';\r\n        this.init = false;\r\n        this.counter = 0;\r\n        this.running = 0;\r\n    }\r\n    Object.defineProperty(FatinaPluginAnimator.prototype, \"TickerManager\", {\r\n        get: function () {\r\n            return this.fatina.plugin.TickerManager;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FatinaPluginAnimator.prototype, \"AnimatorManager\", {\r\n        get: function () {\r\n            return this.fatina.plugin.AnimatorManager;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    FatinaPluginAnimator.prototype.Init = function (fatina) {\r\n        var _this = this;\r\n        if (this.init) {\r\n            throw new Error('Try to init the plugin twice : ' + name);\r\n        }\r\n        if (fatina === undefined || fatina === null || fatina.plugin === null) {\r\n            throw new Error('Try to init the plugin without fatina : ' + name);\r\n        }\r\n        this.fatina = fatina;\r\n        this.init = true;\r\n        fatina.plugin.AnimatorManager = new animatorManager_1.AnimatorManager(this);\r\n        fatina.plugin.TickerManager = new tickerManager_1.TickerManager(this);\r\n        fatina.plugin.StatPanel = new stats.Panel('Tweens', '#ff8', '#221');\r\n        fatina.AddListenerCreated(function (tween) {\r\n            tween.OnStart(function () { return _this.running++; });\r\n            tween.OnComplete(function () { return _this.running--; });\r\n            tween.OnKilled(function () { return _this.running--; });\r\n            _this.counter++;\r\n        });\r\n        fatina.SetInterval(function () {\r\n            fatina.plugin.StatPanel.update('instantiate', _this.counter);\r\n            fatina.plugin.StatPanel.update('running', _this.running);\r\n        }, 16);\r\n    };\r\n    return FatinaPluginAnimator;\r\n}());\r\nexports.FatinaPluginAnimator = FatinaPluginAnimator;\r\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar animator_1 = __webpack_require__(2);\r\nvar AnimatorManager = (function () {\r\n    function AnimatorManager(plugin) {\r\n        this.animations = {};\r\n        this.tickerMap = {};\r\n        this.plugin = plugin;\r\n    }\r\n    Object.defineProperty(AnimatorManager.prototype, \"Animations\", {\r\n        get: function () {\r\n            return Object.keys(this.animations);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AnimatorManager.prototype, \"Labels\", {\r\n        get: function () {\r\n            var _this = this;\r\n            return Object.keys(this.tickerMap).map(function (x) { return _this.tickerMap[x]; }).filter(function (piece, index, self) { return self.indexOf(piece) === index; });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    AnimatorManager.prototype.Register = function (name, onCreate, tickerName) {\r\n        if (this.animations[name] && this.tickerMap[name]) {\r\n            delete this.tickerMap[name];\r\n        }\r\n        this.animations[name] = onCreate;\r\n        if (tickerName) {\r\n            this.tickerMap[name] = tickerName;\r\n        }\r\n        return this;\r\n    };\r\n    AnimatorManager.prototype.Instantiate = function (name, object, params) {\r\n        if (!(name in this.animations)) {\r\n            throw new Error('this animation doesnt exist ' + name);\r\n        }\r\n        var tween = this.animations[name](object, params);\r\n        if (this.tickerMap[name]) {\r\n            tween.SetParent(this.plugin.TickerManager.Get(this.tickerMap[name]));\r\n        }\r\n        return tween;\r\n    };\r\n    AnimatorManager.prototype.AddAnimatorTo = function (obj) {\r\n        if (!obj.Animator) {\r\n            obj.Animator = new animator_1.Animator(obj, this);\r\n        }\r\n        return obj.Animator;\r\n    };\r\n    return AnimatorManager;\r\n}());\r\nexports.AnimatorManager = AnimatorManager;\r\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Animator = (function () {\r\n    function Animator(obj, animatorManager) {\r\n        this.animations = {};\r\n        this.current = {};\r\n        this.groups = ['default'];\r\n        this.currentAnimName = {};\r\n        this.animGroupMap = {};\r\n        this.animTransitionMap = {};\r\n        this.animFinalValueMap = {};\r\n        this.animUnstoppableMap = {};\r\n        this.eventStart = {};\r\n        this.eventOnceStart = {};\r\n        this.eventComplete = {};\r\n        this.eventOnceComplete = {};\r\n        this.object = obj;\r\n        this.animatorManager = animatorManager;\r\n    }\r\n    Animator.prototype.AddAnimation = function (name, animationName, options, params) {\r\n        var anim = this.animatorManager.Instantiate(animationName, this.object, params);\r\n        return this.AddCustomAnimation(name, options || {}, anim);\r\n    };\r\n    Animator.prototype.AddCustomAnimation = function (name, options, tween) {\r\n        var _this = this;\r\n        var anim = tween;\r\n        anim.OnStart(function () {\r\n            _this.EmitEvent(_this.eventStart[name]);\r\n            if (name in _this.eventOnceStart) {\r\n                _this.EmitEvent(_this.eventOnceStart[name]);\r\n                _this.eventOnceStart[name] = [];\r\n            }\r\n        });\r\n        anim.OnKilled(function () {\r\n            anim.Recycle();\r\n            _this.EmitEvent(_this.eventComplete[name]);\r\n            if (name in _this.eventOnceComplete) {\r\n                _this.EmitEvent(_this.eventOnceComplete[name]);\r\n                _this.eventOnceComplete[name] = [];\r\n            }\r\n        });\r\n        anim.OnComplete(function () {\r\n            anim.Recycle();\r\n            _this.EmitEvent(_this.eventComplete[name]);\r\n            if (name in _this.eventOnceComplete) {\r\n                _this.EmitEvent(_this.eventOnceComplete[name]);\r\n                _this.eventOnceComplete[name] = [];\r\n            }\r\n            if (name in _this.animTransitionMap) {\r\n                _this.Play(_this.animTransitionMap[name]);\r\n            }\r\n        });\r\n        this.animations[name] = anim;\r\n        this.animFinalValueMap[name] = options ? !!options.finalValue : false;\r\n        this.animUnstoppableMap[name] = options ? !!options.unstoppable : false;\r\n        this.animGroupMap[name] = (options && options.group) ? options.group : 'default';\r\n        if (options && options.next) {\r\n            this.animTransitionMap[name] = options.next;\r\n        }\r\n        if (this.groups.indexOf(this.animGroupMap[name]) === -1) {\r\n            this.groups.push(this.animGroupMap[name]);\r\n        }\r\n        return this;\r\n    };\r\n    Animator.prototype.Emit = function (func, args) {\r\n        try {\r\n            func.apply(this, args);\r\n        }\r\n        catch (e) {\r\n            console.warn(e);\r\n        }\r\n    };\r\n    Animator.prototype.EmitEvent = function (listeners, args) {\r\n        if (!listeners) {\r\n            return;\r\n        }\r\n        for (var i = 0; i < listeners.length; i++) {\r\n            this.Emit(listeners[i], args);\r\n        }\r\n    };\r\n    Animator.prototype.OnStartAll = function (name, cb) {\r\n        if (name in this.eventStart) {\r\n            this.eventStart[name].push(cb);\r\n        }\r\n        else {\r\n            this.eventStart[name] = [cb];\r\n        }\r\n        return this;\r\n    };\r\n    Animator.prototype.OnStart = function (name, cb) {\r\n        if (name in this.eventOnceStart) {\r\n            this.eventOnceStart[name].push(cb);\r\n        }\r\n        else {\r\n            this.eventOnceStart[name] = [cb];\r\n        }\r\n        return this;\r\n    };\r\n    Animator.prototype.OnCompleteAll = function (name, cb) {\r\n        if (name in this.eventComplete) {\r\n            this.eventComplete[name].push(cb);\r\n        }\r\n        else {\r\n            this.eventComplete[name] = [cb];\r\n        }\r\n        return this;\r\n    };\r\n    Animator.prototype.OnComplete = function (name, cb) {\r\n        if (name in this.eventOnceComplete) {\r\n            this.eventOnceComplete[name].push(cb);\r\n        }\r\n        else {\r\n            this.eventOnceComplete[name] = [cb];\r\n        }\r\n        return this;\r\n    };\r\n    Animator.prototype.Play = function (name, onComplete) {\r\n        if (!(name in this.animations)) {\r\n            throw new Error('this animation doesnt exist ' + name);\r\n        }\r\n        var layerName = this.animGroupMap[name];\r\n        var current = this.current[layerName];\r\n        if (current && current.IsRunning() && this.animUnstoppableMap[this.currentAnimName[layerName]]) {\r\n            console.log('This animation already run and is unstoppable', this.currentAnimName[layerName], '->', name);\r\n            return;\r\n        }\r\n        if (current && (current.IsRunning() || current.IsPaused())) {\r\n            var currentAnimName = this.currentAnimName[layerName];\r\n            current.Skip(this.animFinalValueMap[currentAnimName]);\r\n            this.current[layerName] = undefined;\r\n        }\r\n        current = this.animations[name];\r\n        this.current[layerName] = current;\r\n        this.currentAnimName[layerName] = name;\r\n        if (onComplete) {\r\n            this.OnComplete(name, onComplete);\r\n        }\r\n        current.Start();\r\n        return;\r\n    };\r\n    Animator.prototype.Pause = function (group) {\r\n        var layerName = !group ? 'default' : group;\r\n        var current = this.current[layerName];\r\n        if (current && current.IsRunning()) {\r\n            current.Pause();\r\n        }\r\n    };\r\n    Animator.prototype.PauseAll = function () {\r\n        for (var _i = 0, _a = this.groups; _i < _a.length; _i++) {\r\n            var layerId = _a[_i];\r\n            this.Pause(layerId);\r\n        }\r\n    };\r\n    Animator.prototype.Resume = function (group) {\r\n        var layerName = !group ? 'default' : group;\r\n        var current = this.current[layerName];\r\n        if (current && current.IsPaused()) {\r\n            current.Resume();\r\n        }\r\n    };\r\n    Animator.prototype.ResumeAll = function () {\r\n        for (var _i = 0, _a = this.groups; _i < _a.length; _i++) {\r\n            var layerId = _a[_i];\r\n            this.Resume(layerId);\r\n        }\r\n    };\r\n    Animator.prototype.Stop = function (group) {\r\n        var layerName = !group ? 'default' : group;\r\n        var current = this.current[layerName];\r\n        if (current && !current.IsFinished()) {\r\n            var currentAnimName = this.currentAnimName[layerName];\r\n            current.Skip(this.animFinalValueMap[currentAnimName]);\r\n            this.current[layerName] = undefined;\r\n        }\r\n    };\r\n    Animator.prototype.StopAll = function () {\r\n        for (var _i = 0, _a = this.groups; _i < _a.length; _i++) {\r\n            var layerId = _a[_i];\r\n            this.Stop(layerId);\r\n        }\r\n    };\r\n    Animator.prototype.Destroy = function () {\r\n        for (var _i = 0, _a = this.groups; _i < _a.length; _i++) {\r\n            var layerId = _a[_i];\r\n            var current = this.current[layerId];\r\n            if (current && !current.IsFinished()) {\r\n                current.Kill();\r\n            }\r\n        }\r\n        this.animations = {};\r\n        this.animGroupMap = {};\r\n        this.animFinalValueMap = {};\r\n        this.animUnstoppableMap = {};\r\n        this.current = {};\r\n        this.currentAnimName = {};\r\n        delete this.object.Animator;\r\n    };\r\n    return Animator;\r\n}());\r\nexports.Animator = Animator;\r\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar TickerManager = (function () {\r\n    function TickerManager(plugin) {\r\n        this.tickers = {};\r\n        this.plugin = plugin;\r\n    }\r\n    TickerManager.prototype.Get = function (name) {\r\n        if (this.tickers[name]) {\r\n            return this.tickers[name];\r\n        }\r\n        this.tickers[name] = this.plugin.fatina.Ticker();\r\n        return this.tickers[name];\r\n    };\r\n    TickerManager.prototype.PauseAll = function (name) {\r\n        if (this.tickers[name]) {\r\n            this.tickers[name].Pause();\r\n        }\r\n    };\r\n    TickerManager.prototype.ResumeAll = function (name) {\r\n        if (this.tickers[name]) {\r\n            this.tickers[name].Resume();\r\n        }\r\n    };\r\n    TickerManager.prototype.KillAll = function (name) {\r\n        if (this.tickers[name]) {\r\n            this.tickers[name].Kill();\r\n            delete this.tickers[name];\r\n        }\r\n    };\r\n    return TickerManager;\r\n}());\r\nexports.TickerManager = TickerManager;\r\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// stats.js - http://github.com/mrdoob/stats.js\n(function(f,e){ true?module.exports=e():\"function\"===typeof define&&define.amd?define(e):f.Stats=e()})(this,function(){var f=function(){function e(a){c.appendChild(a.dom);return a}function u(a){for(var d=0;d<c.children.length;d++)c.children[d].style.display=d===a?\"block\":\"none\";l=a}var l=0,c=document.createElement(\"div\");c.style.cssText=\"position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000\";c.addEventListener(\"click\",function(a){a.preventDefault();\nu(++l%c.children.length)},!1);var k=(performance||Date).now(),g=k,a=0,r=e(new f.Panel(\"FPS\",\"#0ff\",\"#002\")),h=e(new f.Panel(\"MS\",\"#0f0\",\"#020\"));if(self.performance&&self.performance.memory)var t=e(new f.Panel(\"MB\",\"#f08\",\"#201\"));u(0);return{REVISION:16,dom:c,addPanel:e,showPanel:u,begin:function(){k=(performance||Date).now()},end:function(){a++;var c=(performance||Date).now();h.update(c-k,200);if(c>g+1E3&&(r.update(1E3*a/(c-g),100),g=c,a=0,t)){var d=performance.memory;t.update(d.usedJSHeapSize/\n1048576,d.jsHeapSizeLimit/1048576)}return c},update:function(){k=this.end()},domElement:c,setMode:u}};f.Panel=function(e,f,l){var c=Infinity,k=0,g=Math.round,a=g(window.devicePixelRatio||1),r=80*a,h=48*a,t=3*a,v=2*a,d=3*a,m=15*a,n=74*a,p=30*a,q=document.createElement(\"canvas\");q.width=r;q.height=h;q.style.cssText=\"width:80px;height:48px\";var b=q.getContext(\"2d\");b.font=\"bold \"+9*a+\"px Helvetica,Arial,sans-serif\";b.textBaseline=\"top\";b.fillStyle=l;b.fillRect(0,0,r,h);b.fillStyle=f;b.fillText(e,t,v);\nb.fillRect(d,m,n,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d,m,n,p);return{dom:q,update:function(h,w){c=Math.min(c,h);k=Math.max(k,h);b.fillStyle=l;b.globalAlpha=1;b.fillRect(0,0,r,m);b.fillStyle=f;b.fillText(g(h)+\" \"+e+\" (\"+g(c)+\"-\"+g(k)+\")\",t,v);b.drawImage(q,d+a,m,n-a,p,d,m,n-a,p);b.fillRect(d+n-a,m,a,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d+n-a,m,a,g((1-h/w)*p))}}};return f});\n\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// fatina-plugin-animator.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 65cc6e4cfb11aecd9aaa","import { IPlugin, IControl } from 'fatina';\nimport { AnimatorManager } from './manager/animatorManager';\nimport { TickerManager } from './manager/tickerManager';\n\n// tslint:disable-next-line:no-var-requires\nconst stats = require('stats.js');\n\nexport function Get(): IPlugin {\n\treturn new FatinaPluginAnimator();\n}\n\nexport interface IPluginAnimator {\n\tAnimatorManager: AnimatorManager;\n\tTickerManager: TickerManager;\n}\n\nexport class FatinaPluginAnimator implements IPlugin {\n\tpublic readonly name = 'fatina-plugin-animator';\n\tprivate fatina: any;\n\tprivate init = false;\n\tprivate statPanel: any;\n\tprivate counter = 0;\n\tprivate running = 0;\n\n\tpublic get TickerManager() {\n\t\treturn this.fatina.plugin.TickerManager;\n\t}\n\n\tpublic get AnimatorManager() {\n\t\treturn this.fatina.plugin.AnimatorManager;\n\t}\n\n\tpublic Init(fatina: any) {\n\t\tif (this.init) {\n\t\t\tthrow new Error('Try to init the plugin twice : ' + name);\n\t\t}\n\n\t\tif (fatina === undefined || fatina === null || fatina.plugin === null) {\n\t\t\tthrow new Error('Try to init the plugin without fatina : ' + name);\n\t\t}\n\n\t\tthis.fatina = fatina;\n\t\tthis.init = true;\n\t\tfatina.plugin.AnimatorManager = new AnimatorManager(this);\n\t\tfatina.plugin.TickerManager = new TickerManager(this);\n\n\t\tfatina.plugin.StatPanel = new stats.Panel( 'Tweens', '#ff8', '#221' );\n\n\t\tfatina.AddListenerCreated((tween: any) => {\n\t\t\ttween.OnStart(() => this.running++);\n\t\t\ttween.OnComplete(() => this.running--);\n\t\t\ttween.OnKilled(() => this.running--);\n\t\t\tthis.counter++;\n\t\t});\n\n\t\tfatina.SetInterval(() => {\n\t\t\tfatina.plugin.StatPanel.update( 'instantiate', this.counter );\n\t\t\tfatina.plugin.StatPanel.update( 'running', this.running );\n\t\t}, 16);\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.ts","import { IControl} from 'fatina';\nimport { Animator } from '../animator/animator';\nimport { FatinaPluginAnimator } from '../index';\n\n/**\n * This manager is there to store shared animations and instantiate them\n *\n * @export\n * @class AnimatorManager\n */\nexport class AnimatorManager {\n\tprivate plugin: FatinaPluginAnimator;\n\tprivate animations: { [id: string]: (object: any, params?: any) => IControl; } = {};\n\tprivate tickerMap: { [id: string]: string; } = {};\n\n\tpublic get Animations(): string[] {\n\t\treturn Object.keys(this.animations);\n\t}\n\n\tpublic get Labels(): string[] {\n\t\treturn Object.keys(this.tickerMap).map((x: string) => this.tickerMap[x]).filter((piece, index, self) => self.indexOf(piece) === index);\n\t}\n\n\tconstructor(plugin: FatinaPluginAnimator) {\n\t\tthis.plugin = plugin;\n\t}\n\n\t/**\n\t * Method used to register a new animation\n\t *\n\t * @param {string} name\n\t * @param {(object: any, params?: any) => IControl} onCreate\n\t * @param {string} [tickerName]\n\t * @returns {AnimatorManager}\n\t *\n\t * @memberOf AnimatorManager\n\t */\n\tpublic Register(name: string, onCreate: (object: any, params?: any) => IControl, tickerName?: string): AnimatorManager {\n\t\tif (this.animations[name] && this.tickerMap[name]) {\n\t\t\tdelete this.tickerMap[name];\n\t\t}\n\t\tthis.animations[name] = onCreate;\n\t\tif (tickerName) {\n\t\t\tthis.tickerMap[name] = tickerName;\n\t\t}\n\t\treturn this;\n\t}\n\n\tpublic Instantiate(name: string, object: any, params?: any): IControl {\n\t\tif (!(name in this.animations)) {\n\t\t\tthrow new Error('this animation doesnt exist ' + name);\n\t\t}\n\n\t\tconst tween = this.animations[name](object, params);\n\t\tif (this.tickerMap[name]) {\n\t\t\t(tween as any).SetParent(this.plugin.TickerManager.Get(this.tickerMap[name]));\n\t\t}\n\n\t\treturn tween;\n\t}\n\n\t/**\n\t * Method used to add a component animator to any object\n\t *\n\t * @param {*} obj\n\t * @returns {Animator}\n\t *\n\t * @memberOf AnimatorManager\n\t */\n\tpublic AddAnimatorTo(obj: any): Animator {\n\t\tif (!obj.Animator) {\n\t\t\tobj.Animator = new Animator(obj, this);\n\t\t}\n\t\treturn obj.Animator;\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/manager/animatorManager.ts","import { IControl} from 'fatina';\nimport { AnimatorManager } from '../manager/animatorManager';\n\nexport interface IAnimationParams {\n\tgroup?: string;\n\tunstoppable?: boolean;\n\tfinalValue?: boolean;\n\tnext?: string\n}\n\n/**\n * Animator component applied on a object.\n * This store a list of animations and manage them for that object\n *\n * @export\n * @class Animator\n */\nexport class Animator {\n\t// public properties\n\tpublic animations: { [id: string]: IControl; } = {};\n\tpublic current: { [id: string]: IControl | undefined } = {};\n\tpublic groups = ['default'];\n\n\t// private properties\n\tprivate object: any;\n\tprivate currentAnimName: { [id: string]: string } = {};\n\tprivate animatorManager: AnimatorManager;\n\tprivate animGroupMap: { [id: string]: string } = {};\n\tprivate animTransitionMap: { [id: string]: string } = {};\n\tprivate animFinalValueMap: { [id: string]: boolean } = {};\n\tprivate animUnstoppableMap: { [id: string]: boolean } = {};\n\n\t// events\n\tprivate eventStart: { [id: string]: {(): void}[] } = {};\n\tprivate eventOnceStart: { [id: string]: {(): void}[] } = {};\n\tprivate eventComplete: { [id: string]: {(): void}[] } = {};\n\tprivate eventOnceComplete: { [id: string]: {(): void}[] } = {};\n\n\tconstructor(obj: any, animatorManager: AnimatorManager) {\n\t\tthis.object = obj;\n\t\tthis.animatorManager = animatorManager;\n\t}\n\n\t/**\n\t * Add a new Animation to this object\n\t *\n\t * @param {string} name\n\t * @param {string} animationName\n\t * @param {(IAnimationParams | any)} [options]\n\t * @param {*} [params]\n\t * @returns {Animator}\n\t * @memberOf Animator\n\t */\n\tpublic AddAnimation(name: string, animationName: string, options?: IAnimationParams | any, params?: any): Animator {\n\t\tconst anim: any = this.animatorManager.Instantiate(animationName, this.object, params);\n\t\treturn this.AddCustomAnimation(name, options || {}, anim);\n\t}\n\n\t/**\n\t * Add a new Tween to this object\n\t *\n\t * @param {string} name\n\t * @param {(IAnimationParams | any)} options\n\t * @param {IControl} tween\n\t * @returns {Animator}\n\t * @memberOf Animator\n\t */\n\tpublic AddCustomAnimation(name: string, options: IAnimationParams | any, tween: IControl): Animator {\n\t\tconst anim: any = tween;\n\t\tanim.OnStart(() => {\n\t\t\tthis.EmitEvent(this.eventStart[name]);\n\t\t\tif (name in this.eventOnceStart) {\n\t\t\t\tthis.EmitEvent(this.eventOnceStart[name])\n\t\t\t\tthis.eventOnceStart[name] = [];\n\t\t\t}\n\t\t});\n\t\tanim.OnKilled(() => {\n\t\t\tanim.Recycle();\n\t\t\tthis.EmitEvent(this.eventComplete[name])\n\t\t\tif (name in this.eventOnceComplete) {\n\t\t\t\tthis.EmitEvent(this.eventOnceComplete[name])\n\t\t\t\tthis.eventOnceComplete[name] = [];\n\t\t\t}\n\t\t});\n\t\tanim.OnComplete(() => {\n\t\t\tanim.Recycle();\n\n\t\t\tthis.EmitEvent(this.eventComplete[name])\n\t\t\tif (name in this.eventOnceComplete) {\n\t\t\t\tthis.EmitEvent(this.eventOnceComplete[name])\n\t\t\t\tthis.eventOnceComplete[name] = [];\n\t\t\t}\n\n\t\t\tif (name in this.animTransitionMap) {\n\t\t\t\tthis.Play(this.animTransitionMap[name]);\n\t\t\t}\n\t\t});\n\n\t\tthis.animations[name] = anim;\n\t\tthis.animFinalValueMap[name] = options ? !!options.finalValue : false;\n\t\tthis.animUnstoppableMap[name] = options ? !!options.unstoppable : false;\n\t\tthis.animGroupMap[name] = (options && options.group) ? options.group : 'default';\n\t\tif (options && options.next) {\n\t\t\tthis.animTransitionMap[name] = options.next;\n\t\t}\n\n\t\tif (this.groups.indexOf(this.animGroupMap[name]) === -1) {\n\t\t\tthis.groups.push(this.animGroupMap[name]);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tprivate Emit(func: any, args: any) {\n\t\ttry {\n\t\t\tfunc.apply(this, args);\n\t\t} catch (e) {\n\t\t\tconsole.warn(e);\n\t\t}\n\t}\n\n\tprivate EmitEvent(listeners: any, args?: any) {\n\t\tif (!listeners) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (let i = 0; i < listeners.length; i++) {\n\t\t\tthis.Emit(listeners[i], args);\n\t\t}\n\t}\n\n\tpublic OnStartAll(name: string, cb: () => void): Animator {\n\t\tif (name in this.eventStart) {\n\t\t\tthis.eventStart[name].push(cb);\n\t\t} else {\n\t\t\tthis.eventStart[name] = [cb];\n\t\t}\n\t\treturn this;\n\t}\n\n\tpublic OnStart(name: string, cb: () => void): Animator {\n\t\tif (name in this.eventOnceStart) {\n\t\t\tthis.eventOnceStart[name].push(cb);\n\t\t} else {\n\t\t\tthis.eventOnceStart[name] = [cb];\n\t\t}\n\t\treturn this;\n\t}\n\n\tpublic OnCompleteAll(name: string, cb: () => void): Animator {\n\t\tif (name in this.eventComplete) {\n\t\t\tthis.eventComplete[name].push(cb);\n\t\t} else {\n\t\t\tthis.eventComplete[name] = [cb];\n\t\t}\n\t\treturn this;\n\t}\n\n\tpublic OnComplete(name: string, cb: () => void): Animator {\n\t\tif (name in this.eventOnceComplete) {\n\t\t\tthis.eventOnceComplete[name].push(cb);\n\t\t} else {\n\t\t\tthis.eventOnceComplete[name] = [cb];\n\t\t}\n\t\treturn this;\n\t}\n\n\t/**\n\t * Method used to play an animation\n\t *\n\t * @param {string} name\n\t * @param {() => void} [onComplete]\n\t * @returns {void}\n\t *\n\t * @memberOf Animator\n\t */\n\tpublic Play(name: string, onComplete?: () => void): void {\n\t\tif (!(name in this.animations)) {\n\t\t\tthrow new Error('this animation doesnt exist ' + name);\n\t\t}\n\n\t\tconst layerName = this.animGroupMap[name];\n\t\tlet current = this.current[layerName];\n\n\t\t// Block any unstoppable running anim\n\t\tif (current && current.IsRunning() && this.animUnstoppableMap[this.currentAnimName[layerName]]) {\n\t\t\tconsole.log('This animation already run and is unstoppable', this.currentAnimName[layerName], '->', name);\n\t\t\treturn;\n\t\t}\n\n\t\t// Stop any previous animation on this layer\n\t\tif (current && (current.IsRunning() || current.IsPaused())) {\n\t\t\tconst currentAnimName = this.currentAnimName[layerName];\n\t\t\t(current as any).Skip(this.animFinalValueMap[currentAnimName]);\n\t\t\tthis.current[layerName] = undefined;\n\t\t}\n\n\t\t// Start the right animation\n\t\tcurrent = this.animations[name];\n\t\tthis.current[layerName] = current;\n\t\tthis.currentAnimName[layerName] = name;\n\n\t\tif (onComplete) {\n\t\t\tthis.OnComplete(name, onComplete);\n\t\t}\n\n\t\tcurrent.Start();\n\t\treturn;\n\t}\n\n\tpublic Pause(group?: string): void {\n\t\tconst layerName = !group ? 'default' : group;\n\t\tconst current = this.current[layerName];\n\t\tif (current && current.IsRunning()) {\n\t\t\tcurrent.Pause();\n\t\t}\n\t}\n\n\tpublic PauseAll() {\n\t\tfor (const layerId of this.groups) {\n\t\t\tthis.Pause(layerId);\n\t\t}\n\t}\n\n\tpublic Resume(group?: string): void {\n\t\tconst layerName = !group ? 'default' : group;\n\t\tconst current = this.current[layerName];\n\t\tif (current && current.IsPaused()) {\n\t\t\tcurrent.Resume();\n\t\t}\n\t}\n\n\tpublic ResumeAll() {\n\t\tfor (const layerId of this.groups) {\n\t\t\tthis.Resume(layerId);\n\t\t}\n\t}\n\n\tpublic Stop(group?: string): void {\n\t\tconst layerName = !group ? 'default' : group;\n\t\tconst current = this.current[layerName];\n\t\tif (current && !current.IsFinished()) {\n\t\t\tconst currentAnimName = this.currentAnimName[layerName];\n\t\t\t(current as any).Skip(this.animFinalValueMap[currentAnimName]);\n\t\t\tthis.current[layerName] = undefined;\n\t\t}\n\t}\n\n\tpublic StopAll() {\n\t\tfor (const layerId of this.groups) {\n\t\t\tthis.Stop(layerId);\n\t\t}\n\t}\n\n\t/**\n\t * Used to destroy this animation and stop all the tweens\n\t *\n\t * @memberOf Animator\n\t */\n\tpublic Destroy() {\n\t\tfor (const layerId of this.groups) {\n\t\t\tconst current = this.current[layerId];\n\t\t\tif (current && !current.IsFinished()) {\n\t\t\t\tcurrent.Kill();\n\t\t\t}\n\t\t}\n\n\t\tthis.animations = {};\n\t\tthis.animGroupMap = {};\n\t\tthis.animFinalValueMap = {};\n\t\tthis.animUnstoppableMap = {};\n\t\tthis.current = {};\n\t\tthis.currentAnimName = {};\n\t\tdelete this.object.Animator;\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/animator/animator.ts","import { ITicker } from 'fatina';\nimport { IPluginAnimator } from '../index';\n\n/**\n * This manager is just there to keep reference to ticker by name\n *\n * @export\n * @class TickerManager\n */\nexport class TickerManager {\n\tprivate plugin: IPluginAnimator;\n\tprivate tickers: { [id: string]: ITicker } = {};\n\n\tconstructor(plugin: IPluginAnimator) {\n\t\tthis.plugin = plugin;\n\t}\n\n\tpublic Get(name: string): ITicker {\n\t\tif (this.tickers[name]) {\n\t\t\treturn this.tickers[name];\n\t\t}\n\n\t\tthis.tickers[name] = (this.plugin as any).fatina.Ticker();\n\t\treturn this.tickers[name]\n\t}\n\n\tpublic PauseAll(name: string): void {\n\t\tif (this.tickers[name]) {\n\t\t\tthis.tickers[name].Pause();\n\t\t}\n\t}\n\n\tpublic ResumeAll(name: string): void {\n\t\tif (this.tickers[name]) {\n\t\t\tthis.tickers[name].Resume();\n\t\t}\n\t}\n\n\tpublic KillAll(name: string): void {\n\t\tif (this.tickers[name]) {\n\t\t\tthis.tickers[name].Kill();\n\t\t\tdelete this.tickers[name];\n\t\t}\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/manager/tickerManager.ts","// stats.js - http://github.com/mrdoob/stats.js\n(function(f,e){\"object\"===typeof exports&&\"undefined\"!==typeof module?module.exports=e():\"function\"===typeof define&&define.amd?define(e):f.Stats=e()})(this,function(){var f=function(){function e(a){c.appendChild(a.dom);return a}function u(a){for(var d=0;d<c.children.length;d++)c.children[d].style.display=d===a?\"block\":\"none\";l=a}var l=0,c=document.createElement(\"div\");c.style.cssText=\"position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000\";c.addEventListener(\"click\",function(a){a.preventDefault();\nu(++l%c.children.length)},!1);var k=(performance||Date).now(),g=k,a=0,r=e(new f.Panel(\"FPS\",\"#0ff\",\"#002\")),h=e(new f.Panel(\"MS\",\"#0f0\",\"#020\"));if(self.performance&&self.performance.memory)var t=e(new f.Panel(\"MB\",\"#f08\",\"#201\"));u(0);return{REVISION:16,dom:c,addPanel:e,showPanel:u,begin:function(){k=(performance||Date).now()},end:function(){a++;var c=(performance||Date).now();h.update(c-k,200);if(c>g+1E3&&(r.update(1E3*a/(c-g),100),g=c,a=0,t)){var d=performance.memory;t.update(d.usedJSHeapSize/\n1048576,d.jsHeapSizeLimit/1048576)}return c},update:function(){k=this.end()},domElement:c,setMode:u}};f.Panel=function(e,f,l){var c=Infinity,k=0,g=Math.round,a=g(window.devicePixelRatio||1),r=80*a,h=48*a,t=3*a,v=2*a,d=3*a,m=15*a,n=74*a,p=30*a,q=document.createElement(\"canvas\");q.width=r;q.height=h;q.style.cssText=\"width:80px;height:48px\";var b=q.getContext(\"2d\");b.font=\"bold \"+9*a+\"px Helvetica,Arial,sans-serif\";b.textBaseline=\"top\";b.fillStyle=l;b.fillRect(0,0,r,h);b.fillStyle=f;b.fillText(e,t,v);\nb.fillRect(d,m,n,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d,m,n,p);return{dom:q,update:function(h,w){c=Math.min(c,h);k=Math.max(k,h);b.fillStyle=l;b.globalAlpha=1;b.fillRect(0,0,r,m);b.fillStyle=f;b.fillText(g(h)+\" \"+e+\" (\"+g(c)+\"-\"+g(k)+\")\",t,v);b.drawImage(q,d+a,m,n-a,p,d,m,n-a,p);b.fillRect(d+n-a,m,a,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d+n-a,m,a,g((1-h/w)*p))}}};return f});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/stats.js/build/stats.min.js\n// module id = 4\n// module chunks = 0 1"],"sourceRoot":""}